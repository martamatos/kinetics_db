"""started db from scratch

Revision ID: 07171ba88a26
Revises: 
Create Date: 2018-11-20 13:52:37.529119

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '07171ba88a26'
down_revision = None
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('author',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('orcid', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('chebi_ids',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('chebi_id', sa.Integer(), nullable=True),
    sa.Column('inchi', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('compartment',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('abbreviation', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('enzyme',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('acronym', sa.String(), nullable=True),
    sa.Column('isoenzyme', sa.String(), nullable=True),
    sa.Column('ec_number', sa.String(), nullable=True),
    sa.Column('timestamp', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_enzyme_timestamp'), 'enzyme', ['timestamp'], unique=False)
    op.create_table('evidence_level',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('gene',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('bigg_id', sa.String(), nullable=True),
    sa.Column('timestamp', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_gene_timestamp'), 'gene', ['timestamp'], unique=False)
    op.create_table('mechanism',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('organism',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('reference_type',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('type', sa.String(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('user',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('username', sa.String(length=64), nullable=True),
    sa.Column('email', sa.String(length=120), nullable=True),
    sa.Column('password_hash', sa.String(length=128), nullable=True),
    sa.Column('about_me', sa.String(length=140), nullable=True),
    sa.Column('last_seen', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_user_email'), 'user', ['email'], unique=True)
    op.create_index(op.f('ix_user_username'), 'user', ['username'], unique=True)
    op.create_table('enzyme_gene',
    sa.Column('enzyme_id', sa.Integer(), nullable=True),
    sa.Column('gene_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['enzyme_id'], ['enzyme.id'], ),
    sa.ForeignKeyConstraint(['gene_id'], ['gene.id'], )
    )
    op.create_table('enzyme_structure',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('pdb_id', sa.String(), nullable=True),
    sa.Column('enzyme_id', sa.String(), nullable=True),
    sa.Column('organism_id', sa.String(), nullable=True),
    sa.Column('strain', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['enzyme_id'], ['enzyme.id'], ),
    sa.ForeignKeyConstraint(['organism_id'], ['organism.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('followers',
    sa.Column('follower_id', sa.Integer(), nullable=True),
    sa.Column('followed_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['followed_id'], ['user.id'], ),
    sa.ForeignKeyConstraint(['follower_id'], ['user.id'], )
    )
    op.create_table('metabolite',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('grasp_id', sa.String(), nullable=True),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('bigg_id', sa.String(), nullable=True),
    sa.Column('metanetx_id', sa.String(), nullable=True),
    sa.Column('kegg_id', sa.String(), nullable=True),
    sa.Column('compartment_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['compartment_id'], ['compartment.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('model',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('organism_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['organism_id'], ['organism.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('post',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('body', sa.String(length=140), nullable=True),
    sa.Column('timestamp', sa.DateTime(), nullable=True),
    sa.Column('user_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['user_id'], ['user.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_post_timestamp'), 'post', ['timestamp'], unique=False)
    op.create_table('reference',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('pmid', sa.Integer(), nullable=True),
    sa.Column('doi', sa.String(), nullable=True),
    sa.Column('title', sa.String(), nullable=True),
    sa.Column('link', sa.String(), nullable=True),
    sa.Column('type_id', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['type_id'], ['reference_type.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('gibbs_energy',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('standard_dg', sa.Float(), nullable=True),
    sa.Column('standard_dg_std', sa.Float(), nullable=True),
    sa.Column('ph', sa.Float(), nullable=True),
    sa.Column('ionic_strength', sa.Float(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('metabolite_chebi',
    sa.Column('metabolite_id', sa.Integer(), nullable=True),
    sa.Column('chebi_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['chebi_id'], ['chebi_ids.id'], ),
    sa.ForeignKeyConstraint(['metabolite_id'], ['metabolite.id'], )
    )
    op.create_table('model_assumptions',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('model_id', sa.Integer(), nullable=True),
    sa.Column('assumption', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('evidence_level_id', sa.Integer(), nullable=True),
    sa.Column('included_in_model', sa.Boolean(), nullable=True),
    sa.ForeignKeyConstraint(['evidence_level_id'], ['evidence_level.id'], ),
    sa.ForeignKeyConstraint(['model_id'], ['model.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('reference_author',
    sa.Column('author_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['author_id'], ['author.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    op.create_table('reaction',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('grasp_id', sa.String(), nullable=True),
    sa.Column('name', sa.String(), nullable=True),
    sa.Column('metanetx_id', sa.String(), nullable=True),
    sa.Column('reactome_id', sa.String(), nullable=True),
    sa.Column('bigg_id', sa.String(), nullable=True),
    sa.Column('kegg_id', sa.String(), nullable=True),
    sa.Column('compartment_id', sa.Integer(), nullable=True),
    sa.Column('gibbs_energy_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['compartment_id'], ['compartment.id'], ),
    sa.ForeignKeyConstraint(['gibbs_energy_id'], ['gibbs_energy.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('reference_model_assumptions',
    sa.Column('model_assumptions_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['model_assumptions_id'], ['model_assumptions.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    op.create_table('enzyme_organism',
    sa.Column('enzyme_id', sa.Integer(), nullable=False),
    sa.Column('reaction_id', sa.Integer(), nullable=False),
    sa.Column('organism_id', sa.Integer(), nullable=False),
    sa.Column('uniprot_id', sa.String(), nullable=True),
    sa.Column('n_active_sites', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['enzyme_id'], ['enzyme.id'], ),
    sa.ForeignKeyConstraint(['organism_id'], ['organism.id'], ),
    sa.ForeignKeyConstraint(['reaction_id'], ['reaction.id'], ),
    sa.PrimaryKeyConstraint('enzyme_id', 'reaction_id', 'organism_id')
    )
    op.create_table('enzyme_reaction_model',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('enzyme_id', sa.Integer(), nullable=True),
    sa.Column('reaction_id', sa.Integer(), nullable=True),
    sa.Column('model_id', sa.Integer(), nullable=True),
    sa.Column('organism_id', sa.Integer(), nullable=True),
    sa.Column('mechanism_id', sa.Integer(), nullable=True),
    sa.Column('mech_evidence_level_id', sa.Integer(), nullable=True),
    sa.Column('binding_release_order', sa.String(), nullable=True),
    sa.Column('included_in_model', sa.Boolean(), nullable=True),
    sa.Column('comments', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['enzyme_id'], ['enzyme.id'], ),
    sa.ForeignKeyConstraint(['mech_evidence_level_id'], ['evidence_level.id'], ),
    sa.ForeignKeyConstraint(['mechanism_id'], ['mechanism.id'], ),
    sa.ForeignKeyConstraint(['model_id'], ['model.id'], ),
    sa.ForeignKeyConstraint(['organism_id'], ['organism.id'], ),
    sa.ForeignKeyConstraint(['reaction_id'], ['reaction.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('reaction_metabolite',
    sa.Column('reaction_id', sa.Integer(), nullable=False),
    sa.Column('metabolite_id', sa.Integer(), nullable=False),
    sa.Column('stoich_coef', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['metabolite_id'], ['metabolite.id'], ),
    sa.ForeignKeyConstraint(['reaction_id'], ['reaction.id'], ),
    sa.PrimaryKeyConstraint('reaction_id', 'metabolite_id')
    )
    op.create_table('enzyme_reaction_activation',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('enz_rxn_model_id', sa.Integer(), nullable=True),
    sa.Column('activator_met', sa.String(), nullable=True),
    sa.Column('activation_constant', sa.Float(), nullable=True),
    sa.Column('evidence_level_id', sa.Integer(), nullable=True),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['enz_rxn_model_id'], ['enzyme_reaction_model.id'], ),
    sa.ForeignKeyConstraint(['evidence_level_id'], ['evidence_level.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('enzyme_reaction_effector',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('enz_rxn_model_id', sa.Integer(), nullable=True),
    sa.Column('effector_met', sa.String(), nullable=True),
    sa.Column('effector_type', sa.Enum('activator', 'inhibitor', name='effectorenum'), nullable=True),
    sa.Column('evidence_level_id', sa.Integer(), nullable=True),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['enz_rxn_model_id'], ['enzyme_reaction_model.id'], ),
    sa.ForeignKeyConstraint(['evidence_level_id'], ['evidence_level.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('enzyme_reaction_inhibition',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('enz_rxn_model_id', sa.Integer(), nullable=True),
    sa.Column('inhibitor_met', sa.String(), nullable=True),
    sa.Column('affected_met', sa.String(), nullable=True),
    sa.Column('inhibition_constant', sa.Float(), nullable=True),
    sa.Column('evidence_level_id', sa.Integer(), nullable=True),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['enz_rxn_model_id'], ['enzyme_reaction_model.id'], ),
    sa.ForeignKeyConstraint(['evidence_level_id'], ['evidence_level.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('enzyme_reaction_misc_info',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('enz_rxn_model_id', sa.Integer(), nullable=True),
    sa.Column('topic', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('evidence_level_id', sa.Integer(), nullable=True),
    sa.Column('comments', sa.Text(), nullable=True),
    sa.ForeignKeyConstraint(['enz_rxn_model_id'], ['enzyme_reaction_model.id'], ),
    sa.ForeignKeyConstraint(['evidence_level_id'], ['evidence_level.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('reference_mechanism',
    sa.Column('mechanism_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['mechanism_id'], ['enzyme_reaction_model.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    op.create_table('reference_activation',
    sa.Column('activation_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['activation_id'], ['enzyme_reaction_activation.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    op.create_table('reference_effector',
    sa.Column('effector_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['effector_id'], ['enzyme_reaction_effector.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    op.create_table('reference_inhibition',
    sa.Column('inhibition_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['inhibition_id'], ['enzyme_reaction_inhibition.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    op.create_table('reference_misc_info',
    sa.Column('misc_info_id', sa.Integer(), nullable=True),
    sa.Column('reference_id', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['misc_info_id'], ['enzyme_reaction_misc_info.id'], ),
    sa.ForeignKeyConstraint(['reference_id'], ['reference.id'], )
    )
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('reference_misc_info')
    op.drop_table('reference_inhibition')
    op.drop_table('reference_effector')
    op.drop_table('reference_activation')
    op.drop_table('reference_mechanism')
    op.drop_table('enzyme_reaction_misc_info')
    op.drop_table('enzyme_reaction_inhibition')
    op.drop_table('enzyme_reaction_effector')
    op.drop_table('enzyme_reaction_activation')
    op.drop_table('reaction_metabolite')
    op.drop_table('enzyme_reaction_model')
    op.drop_table('enzyme_organism')
    op.drop_table('reference_model_assumptions')
    op.drop_table('reaction')
    op.drop_table('reference_author')
    op.drop_table('model_assumptions')
    op.drop_table('metabolite_chebi')
    op.drop_table('gibbs_energy')
    op.drop_table('reference')
    op.drop_index(op.f('ix_post_timestamp'), table_name='post')
    op.drop_table('post')
    op.drop_table('model')
    op.drop_table('metabolite')
    op.drop_table('followers')
    op.drop_table('enzyme_structure')
    op.drop_table('enzyme_gene')
    op.drop_index(op.f('ix_user_username'), table_name='user')
    op.drop_index(op.f('ix_user_email'), table_name='user')
    op.drop_table('user')
    op.drop_table('reference_type')
    op.drop_table('organism')
    op.drop_table('mechanism')
    op.drop_index(op.f('ix_gene_timestamp'), table_name='gene')
    op.drop_table('gene')
    op.drop_table('evidence_level')
    op.drop_index(op.f('ix_enzyme_timestamp'), table_name='enzyme')
    op.drop_table('enzyme')
    op.drop_table('compartment')
    op.drop_table('chebi_ids')
    op.drop_table('author')
    # ### end Alembic commands ###
